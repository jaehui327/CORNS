# ğŸŒ½ OpenVidu ë°°í¬ ê°€ì´ë“œ

ì°¸ê³  ì‚¬ì´íŠ¸ :

[OpenVidu Pro on-premises ê³µì‹ ë¬¸ì„œ](https://docs.openvidu.io/en/stable/deployment/pro/on-premises/)

## ë¯¸ë””ì–´ ì„œë²„

<aside>
ğŸ’¡ stt ì‚¬ìš©ì‹œ **2 CPU / 8GB of RAM** ì´ìƒ ìŠ¤í™ì˜ ì„œë²„ í•„ìš”

</aside>

### í¬íŠ¸ ì˜¤í”ˆ

<aside>
ğŸ“Œ ufw allow ssh
ufw allow 40000:65535/tcp
ufw allow 40000:65535/udp
ufw allow 3000/tcp from <OPENVIDU_SERVER_PRO_IP>
ufw allow 4000/tcp from <OPENVIDU_SERVER_PRO_IP>
ufw allow 8888/tcp from <OPENVIDU_SERVER_PRO_IP>
ufw allow 80/tcp from <OPENVIDU_SERVER_PRO_IP>
ufw enable

</aside>

### ë„ì»¤ ì„¤ì¹˜

```kotlin
-- apt ì—…ë°ì´íŠ¸, íŒ¨í‚¤ì§€ ì„¤ì¹˜
sudo apt-get update
sudo apt-get install \
    apt-transport-https \
    ca-certificates \
    curl \
    gnupg-agent \
    software-properties-common

-- GPG key ë“±ë¡
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -

-- repositoryì— ì¶”ê°€
sudo add-apt-repository \
    "deb [arch=amd64] https://download.docker.com/linux/ubuntu \
    $(lsb_release -cs) \
    stable"

-- docker ì„¤ì¹˜í•˜ê¸°
sudo apt-get update
sudo apt-get install docker-ce docker-ce-cli containerd.io

-- ubuntu image ë°›ê¸°
docker pull ubuntu

-- image ì‹¤í–‰
docker run -it ubuntu

-- Docker compose ì„¤ì¹˜
sudo curl -L "https://github.com/docker/compose/releases/download/v2.12.2/docker-compose-$(uname -s)-$(uname -m)"  -o /usr/local/bin/docker-compose
sudo mv /usr/local/bin/docker-compose /usr/bin/docker-compose
sudo chmod +x /usr/bin/docker-compose
```

### ë°°í¬

```c
sudo su
cd /opt
curl https://s3-eu-west-1.amazonaws.com/aws.openvidu.io/install_media_node_latest.sh | bash
```

### ì‹œì‘

````kotlin
./media_node start      -- ì‹œì‘
./media_node restart    -- ì¬ì‹œì‘
    ```

## ë§ˆìŠ¤í„° ì„œë²„

### í¬íŠ¸ ì˜¤í”ˆ

<aside>
ğŸ“Œ ufw allow ssh
ufw allow 80/tcp
ufw allow 443/tcp
ufw allow 3478/tcp
ufw allow 3478/udp
ufw allow 5044/tcp
ufw allow 9200/tcp
ufw allow 40000:65535/tcp
ufw allow 40000:65535/udp
ufw enable

</aside>

### ë„ì»¤ ì„¤ì¹˜

```kotlin
-- apt ì—…ë°ì´íŠ¸, íŒ¨í‚¤ì§€ ì„¤ì¹˜
sudo apt-get update
sudo apt-get install \
    apt-transport-https \
    ca-certificates \
    curl \
    gnupg-agent \
    software-properties-common

-- GPG key ë“±ë¡
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -

-- repositoryì— ì¶”ê°€
sudo add-apt-repository \
    "deb [arch=amd64] https://download.docker.com/linux/ubuntu \
    $(lsb_release -cs) \
    stable"

-- docker ì„¤ì¹˜í•˜ê¸°
sudo apt-get update
sudo apt-get install docker-ce docker-ce-cli containerd.io

-- ubuntu image ë°›ê¸°
docker pull ubuntu

-- image ì‹¤í–‰
docker run -it ubuntu

-- Docker compose ì„¤ì¹˜
sudo curl -L "https://github.com/docker/compose/releases/download/v2.12.2/docker-compose-$(uname -s)-$(uname -m)"  -o /usr/local/bin/docker-compose
sudo mv /usr/local/bin/docker-compose /usr/bin/docker-compose
sudo chmod +x /usr/bin/docker-compose
````

### ë„ì»¤íŒŒì¼ ë°›ê¸°

```kotlin
sudo su
cd /opt
curl https://s3-eu-west-1.amazonaws.com/aws.openvidu.io/install_openvidu_pro_latest.sh | bash
```

### í™˜ê²½ë³€ìˆ˜ ì„¤ì •

```kotlin
cd /opt/openvidu
nano .env
```

### í•„ìˆ˜ì„¤ì •

- **`DOMAIN_OR_PUBLIC_IP`**Â  : ë§ˆìŠ¤í„°ì„œë²„ ë„ë©”ì¸ or public ip ì£¼ì†Œ
- **`OPENVIDU_SECRET`** : api í˜¸ì¶œì‹œ ì‚¬ìš©í•  ë¹„ë°€ë²ˆí˜¸
- **`ELASTICSEARCH_PASSWORD`** : ëª¨ë‹ˆí„°ë§ ì„œë¹„ìŠ¤ ë¹„ë°€ë²ˆí˜¸
- **`OPENVIDU_PRO_LICENSE`** : PROë²„ì „ ë¼ì´ì„¼ìŠ¤í‚¤
- **`CERTIFICATE_TYPE`** : ì•”í˜¸í™”ë°©ì‹
- **`KMS_URIS` : ë¯¸ë””ì–´ ë…¸ë“œ public ip:8888/kurento**

![](./img/media.jpg)

### ë§ˆìŠ¤í„° ì„œë²„ ì‹¤í–‰

```kotlin
sudo su
cd /opt/openvidu
./openvidu start
```

![](./img/master.jpg)
